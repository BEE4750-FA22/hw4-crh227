<!DOCTYPE html>
<HTML lang = "en">
<HEAD>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>BEE 4750&#x2F;5750 Homework 4</title>
  

  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
      TeX: { equationNumbers: { autoNumber: "AMS" } }
    });
  </script>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Menlo&family=Hind&family=Raleway&family=Yantramanav&display=swap');
</style>

  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>

  
<style>
pre.hljl {
    border: 1px solid #ccc;
    margin: 5px;
    padding: 5px;
    overflow-x: auto;
    color: rgb(68,68,68); background-color: rgb(251,251,251); }
pre.hljl > span.hljl-t { }
pre.hljl > span.hljl-w { }
pre.hljl > span.hljl-e { }
pre.hljl > span.hljl-eB { }
pre.hljl > span.hljl-o { }
pre.hljl > span.hljl-k { color: rgb(148,91,176); font-weight: bold; }
pre.hljl > span.hljl-kc { color: rgb(59,151,46); font-style: italic; }
pre.hljl > span.hljl-kd { color: rgb(214,102,97); font-style: italic; }
pre.hljl > span.hljl-kn { color: rgb(148,91,176); font-weight: bold; }
pre.hljl > span.hljl-kp { color: rgb(148,91,176); font-weight: bold; }
pre.hljl > span.hljl-kr { color: rgb(148,91,176); font-weight: bold; }
pre.hljl > span.hljl-kt { color: rgb(148,91,176); font-weight: bold; }
pre.hljl > span.hljl-n { }
pre.hljl > span.hljl-na { }
pre.hljl > span.hljl-nb { }
pre.hljl > span.hljl-nbp { }
pre.hljl > span.hljl-nc { }
pre.hljl > span.hljl-ncB { }
pre.hljl > span.hljl-nd { color: rgb(214,102,97); }
pre.hljl > span.hljl-ne { }
pre.hljl > span.hljl-neB { }
pre.hljl > span.hljl-nf { color: rgb(66,102,213); }
pre.hljl > span.hljl-nfm { color: rgb(66,102,213); }
pre.hljl > span.hljl-np { }
pre.hljl > span.hljl-nl { }
pre.hljl > span.hljl-nn { }
pre.hljl > span.hljl-no { }
pre.hljl > span.hljl-nt { }
pre.hljl > span.hljl-nv { }
pre.hljl > span.hljl-nvc { }
pre.hljl > span.hljl-nvg { }
pre.hljl > span.hljl-nvi { }
pre.hljl > span.hljl-nvm { }
pre.hljl > span.hljl-l { }
pre.hljl > span.hljl-ld { color: rgb(148,91,176); font-style: italic; }
pre.hljl > span.hljl-s { color: rgb(201,61,57); }
pre.hljl > span.hljl-sa { color: rgb(201,61,57); }
pre.hljl > span.hljl-sb { color: rgb(201,61,57); }
pre.hljl > span.hljl-sc { color: rgb(201,61,57); }
pre.hljl > span.hljl-sd { color: rgb(201,61,57); }
pre.hljl > span.hljl-sdB { color: rgb(201,61,57); }
pre.hljl > span.hljl-sdC { color: rgb(201,61,57); }
pre.hljl > span.hljl-se { color: rgb(59,151,46); }
pre.hljl > span.hljl-sh { color: rgb(201,61,57); }
pre.hljl > span.hljl-si { }
pre.hljl > span.hljl-so { color: rgb(201,61,57); }
pre.hljl > span.hljl-sr { color: rgb(201,61,57); }
pre.hljl > span.hljl-ss { color: rgb(201,61,57); }
pre.hljl > span.hljl-ssB { color: rgb(201,61,57); }
pre.hljl > span.hljl-nB { color: rgb(59,151,46); }
pre.hljl > span.hljl-nbB { color: rgb(59,151,46); }
pre.hljl > span.hljl-nfB { color: rgb(59,151,46); }
pre.hljl > span.hljl-nh { color: rgb(59,151,46); }
pre.hljl > span.hljl-ni { color: rgb(59,151,46); }
pre.hljl > span.hljl-nil { color: rgb(59,151,46); }
pre.hljl > span.hljl-noB { color: rgb(59,151,46); }
pre.hljl > span.hljl-oB { color: rgb(102,102,102); font-weight: bold; }
pre.hljl > span.hljl-ow { color: rgb(102,102,102); font-weight: bold; }
pre.hljl > span.hljl-p { }
pre.hljl > span.hljl-c { color: rgb(153,153,119); font-style: italic; }
pre.hljl > span.hljl-ch { color: rgb(153,153,119); font-style: italic; }
pre.hljl > span.hljl-cm { color: rgb(153,153,119); font-style: italic; }
pre.hljl > span.hljl-cp { color: rgb(153,153,119); font-style: italic; }
pre.hljl > span.hljl-cpB { color: rgb(153,153,119); font-style: italic; }
pre.hljl > span.hljl-cs { color: rgb(153,153,119); font-style: italic; }
pre.hljl > span.hljl-csB { color: rgb(153,153,119); font-style: italic; }
pre.hljl > span.hljl-g { }
pre.hljl > span.hljl-gd { }
pre.hljl > span.hljl-ge { }
pre.hljl > span.hljl-geB { }
pre.hljl > span.hljl-gh { }
pre.hljl > span.hljl-gi { }
pre.hljl > span.hljl-go { }
pre.hljl > span.hljl-gp { }
pre.hljl > span.hljl-gs { }
pre.hljl > span.hljl-gsB { }
pre.hljl > span.hljl-gt { }
</style>



  <link rel="stylesheet" href="bee4750.css">
</HEAD>

<BODY>
  <div class ="container">
    <div class = "row">
      <div class = "col-md-12 twelve columns">
        <div class="title">
          <h1 class="title">BEE 4750&#x2F;5750 Homework 4</h1>
          <h2 class="title">Caroline Herzog (crh227)</h2>
          <h2 class="title">2022-11-01</h2>        

        </div>
    <hr class="title">


        
<!--  This setups the environment and installs packages, but doesn't appear in the generated document  -->


<!--  You shouldn't need to modify this  -->



<h1>Problem 1</h1>
<h2>Problem 1.1</h2>

<pre class='hljl'>
<span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># fraction recycled per type of waste</span><span class='hljl-t'>
       </span><span class='hljl-n'>recycled</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-p'>[</span><span class='hljl-ni'>0</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.55</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.15</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.1</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-ni'>0</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.3</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.4</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.6</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.75</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.8</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.5</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-ni'>0</span><span class='hljl-p'>]</span><span class='hljl-t'>
12-element Vector{Float64}:
 0.0
 0.55
 0.15
 0.1
 0.0
 0.3
 0.4
 0.6
 0.75
 0.8
 0.5
 0.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># fraction combustion ash per type of waste</span><span class='hljl-t'>
       </span><span class='hljl-n'>ash</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-p'>[</span><span class='hljl-nfB'>0.08</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.07</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.05</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.1</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.15</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.02</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.02</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-ni'>1</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-ni'>1</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-ni'>1</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-ni'>1</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.7</span><span class='hljl-p'>]</span><span class='hljl-t'>
12-element Vector{Float64}:
 0.08
 0.07
 0.05
 0.1
 0.15
 0.02
 0.02
 1.0
 1.0
 1.0
 1.0
 0.7

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># fraction of each waste type</span><span class='hljl-t'>
       </span><span class='hljl-n'>type</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-p'>[</span><span class='hljl-nfB'>0.15</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.4</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.05</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.03</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.02</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.05</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.18</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.04</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.02</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.02</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.01</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-nfB'>0.03</span><span class='hljl-p'>]</span><span class='hljl-t'>
12-element Vector{Float64}:
 0.15
 0.4
 0.05
 0.03
 0.02
 0.05
 0.18
 0.04
 0.02
 0.02
 0.01
 0.03

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># find overall fraction recycled by multiplying by waste composition</span><span class='hljl-t'>
       </span><span class='hljl-n'>fracR</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-nf'>sum</span><span class='hljl-p'>(</span><span class='hljl-n'>recycled</span><span class='hljl-oB'>.*</span><span class='hljl-n'>type</span><span class='hljl-p'>)</span><span class='hljl-t'>
0.3775000000000001

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># find overall combustion ash fraction</span><span class='hljl-t'>
       </span><span class='hljl-n'>fracA</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-nf'>sum</span><span class='hljl-p'>(</span><span class='hljl-n'>ash</span><span class='hljl-oB'>.*</span><span class='hljl-n'>type</span><span class='hljl-p'>)</span><span class='hljl-t'>
0.16410000000000002

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># find overall combustion ash fraction for recycled mass</span><span class='hljl-t'>
       </span><span class='hljl-n'>fracAR</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-nf'>sum</span><span class='hljl-p'>(</span><span class='hljl-n'>ash</span><span class='hljl-oB'>.*</span><span class='hljl-p'>(</span><span class='hljl-n'>type</span><span class='hljl-t'> </span><span class='hljl-oB'>-</span><span class='hljl-t'> </span><span class='hljl-n'>recycled</span><span class='hljl-oB'>.*</span><span class='hljl-n'>type</span><span class='hljl-p'>))</span><span class='hljl-t'>
0.086285</span>
</pre>

<h2>Problem 1.2</h2>
<p>The decision variables are:</p>
<p class="math">\[
\begin{align*}
W_{i,j} = \text{mass of waste from city i to disposal j per day (Mg/day)} \\
R_{k,j} = \text{mass of residual waste transported from disposal k to another disposal j} \\
Y_j = \text{operational status (whether plant is on or off) - binary variable} \\
\end{align*}
\]</p>
<h2>Problem 1.3</h2>
<p>Assuming that the objective is to minimize the total cost for waste disposal from both cities,  we need to find the cost incurred at each disposal site, and sum these costs up.</p>
<p>At each disposal site &#40;j&#41;, we can say:</p>
<p class="math">\[
\text{Cost}_j = TC_j * \text{waste deposited} + RC \text{(if applicable)} * \text{waste recycled} + FC_j * Y_j
\]</p>
<p>And for transportation costs:</p>
<p class="math">\[
\text{Cost}_{i,j} = 1.5 \text{USD/Mg-km} * (\text{dist. between i and j}) * W_{i,j}
\]</p>
<p>where,</p>
<p class="math">\[
\begin{align*}
TC_j = \text{tipping cost of site j (USD/Mg)} \\
RC = \text{cost of recycling at MRF (USD/Mg)} \\
FC_j = \text{fixed cost of operating side j (USD/day)} \\
\end{align*}
\]</p>
<p>We also want to know the mass entering/leaving each site:</p>
<table><tr><th>Site j</th><th>Entering</th><th>Leaving</th></tr><tr><td>WTE &#40;1&#41;</td><td><span class="math">$W_{1,1} + W_{2,1} + R_{2,1}$</span></td><td><span class="math">$R_{1,3}$</span></td></tr><tr><td>MRF &#40;2&#41;</td><td><span class="math">$W_{1,2} + W_{2,2}$</span></td><td><span class="math">$R_{2,3}+ R_{2,1}$</span></td></tr><tr><td>LF  &#40;3&#41;</td><td><span class="math">$W_{1,3} + W_{2,3} + R_{1,3} + R_{2,3}$</span></td><td>0</td></tr></table>
<p>Using the following notation,</p>
<p class="math">\[
\begin{align*}
\text{fracR} = \text{fraction of waste recycled} \\
Z_j = \text{total cost of disposal at site j (USD/day)} \\
\end{align*}
\]</p>
<p>We can write equations for the cost at each site &#43; transportation costs:</p>
<ol>
<li><p class="math">\[
Z_{\text{WTE}} = TC_1*(W_{1,1} + W_{2,1} + R_{2,1}) + FC_1 * Y_1
\]</p>
</li>
<li><p class="math">\[
Z_{\text{MRF}} = (TC_2 + RC * \text{fracR})*(W_{1,2} + W_{2,2}) + FC_2 * Y_2
\]</p>
</li>
<li><p class="math">\[
Z_{\text{LF}} = TC_3*(W_{1,3} + W_{2,3} + R_{1,3} + R_{2,3}) + FC_3 * Y_3
\]</p>
</li>
<li><p class="math">\[
Z_{\text{transport}} = 1.5*[15W_{1,1} + 10W_{2,1} + 5W_{1,2} + 15W_{2,2} + 30W_{1,3} + 25W_{2,3} + 15R_{2,1} + 32R_{2,3} + 18R_{1,3}]
\]</p>
</li>
</ol>
<p>And combine the above to write our objective function:</p>
<p class="math">\[
Z_{\text{total}} = Z_{\text{WTE}} + Z_{\text{MRF}} + Z_{\text{LF}} + Z_{\text{transport}} \\
\\ 
\begin{align*}
Z_{\text{total}} = TC_1*(W_{1,1} + W_{2,1} + R_{2,1}) + FC_1 * Y_1 + (TC_2 + RC * \text{fracR})*(W_{1,2} + W_{2,2}) + FC_2 * Y_2 \\
                 + TC_3*(W_{1,3} + W_{2,3} + R_{1,3} + R_{2,3}) + FC_3 * Y_3 \\
                 + 1.5*[15W_{1,1} + 10W_{2,1} + 5W_{1,2} + 15W_{2,2} + 30W_{1,3} + 25W_{2,3} + 15R_{2,1} + 32R_{2,3} + 18R_{1,3}]
\end{align*}
\]</p>
<h2>Problem 1.4</h2>
<p>To write constraints more easily, use variables to express given quantities:</p>
<p class="math">\[
 S_i = \text{mass produced by city i, (Mg/day)} \\
 C_j = \text{capacity of disposal site j, (Mg/day)} \\
\]</p>
<p>In order to make sure our constraints are complete, we need to make sure that:</p>
<ol>
<li><p>All waste generated by city leaves &#40;no mass accumulates in city&#41;</p>
</li>
<li><p>Waste sent from one disposal to another does not exceed the leftover waste generated by the site</p>
</li>
<li><p>The total inflow of waste to each site never exceeds the capacity the site can handle </p>
</li>
<li><p>Our variables reflect real-world scenario: &#40;i&#41; <span class="math">$Y_j$</span> is binary, &#40;ii&#41; all other variables are always <span class="math">$\geq 0$</span>, </p>
</li>
</ol>
<p>&#40;iii&#41; no waste streams from sites are sent to the site they came from, and &#40;iv&#41; no ash can be sent from WTE to MRF</p>
<p>Constraint #1 - Making sure waste flows &#61; city waste production:</p>
<p class="math">\[
W_{1,1} + W_{1,2} + W_{1,3} = S_1 \\
W_{2,1} + W_{2,2} + W_{2,3} = S_2 \\
\]</p>
<p>Constraint #2 - &#40;i&#41; Waste sent from WTE site &#61; mass of ash produced, and &#40;ii&#41; Waste sent from MRF subtracts the mass recycled:</p>
<p class="math">\[
R_{1,3} = \text{ash fraction} * (W_{1,1} + W_{2,1}) + \text{ash fraction from recycled mass} * R_{2,1}) \\
R_{2,1} + R_{2,3} = (1 - \text{fraction recycled}) * (W_{1,2} + W_{2,2}) \\
\]</p>
<p>Constraint #3 - Waste sites cannot handle more than their capacity:</p>
<p class="math">\[
W_{1,1} + W_{2,1} + R_{2,1} \leq C_1 \\
W_{1,2} + W_{2,2} \leq C_2 \\
W_{1,3} + W_{2,3} + R_{1,3} + R_{2,3} \leq C_3 \\
\]</p>
<p>Constraint #4 - Ensuring variables reflect real-world scenario</p>
<p class="math">\[
\text{i. Y remains binary variable} \\

Y_1 =
\begin{cases}
0    &\text{if $W_{1,1} + W_{2,1} + R_{2,1} = 0$} \\
1    &\text{else}
\end{cases}
\\
Y_2 =
\begin{cases}
0    &\text{if $W_{1,2} + W_{2,2}$} \\
1    &\text{else}
\end{cases}
\\
Y_3 = 1
\]</p>
<p class="math">\[
\text{ii. non-negativity } \\

W_{i,j} \geq 0 \\
R_{k,j} \geq 0 \\

\text{iii. no waste streams are "internally transferred" from site to itself } \\
\sum_j{R{j,j}} = 0 \\ 

\text{iv. no ash from WTE can be recycled } \\
R_{1,2} = 0
\]</p>
<h2>Problem 1.5</h2>

<pre class='hljl'>
<span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># setting up model definition</span><span class='hljl-t'>
       </span><span class='hljl-k'>using</span><span class='hljl-t'> </span><span class='hljl-n'>JuMP</span><span class='hljl-t'>

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-k'>using</span><span class='hljl-t'> </span><span class='hljl-n'>Cbc</span><span class='hljl-t'>

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-n'>citywaste</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-nf'>Model</span><span class='hljl-p'>(</span><span class='hljl-n'>Cbc</span><span class='hljl-oB'>.</span><span class='hljl-n'>Optimizer</span><span class='hljl-p'>)</span><span class='hljl-t'>
A JuMP Model
Feasibility problem with:
Variables: 0
Model mode: AUTOMATIC
CachingOptimizer state: EMPTY_OPTIMIZER
Solver name: COIN Branch-and-Cut (Cbc)

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-n'>I</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-ni'>1</span><span class='hljl-oB'>:</span><span class='hljl-ni'>2</span><span class='hljl-t'>     </span><span class='hljl-cs'># number of cities</span><span class='hljl-t'>
1:2

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-n'>J</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-ni'>1</span><span class='hljl-oB'>:</span><span class='hljl-ni'>3</span><span class='hljl-t'>     </span><span class='hljl-cs'># number of disposal sites</span><span class='hljl-t'>
1:3

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># defining decision variables</span><span class='hljl-t'>
       </span><span class='hljl-nd'>@variable</span><span class='hljl-p'>(</span><span class='hljl-n'>citywaste</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>W</span><span class='hljl-p'>[</span><span class='hljl-n'>i</span><span class='hljl-t'> </span><span class='hljl-kp'>in</span><span class='hljl-t'> </span><span class='hljl-n'>I</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>j</span><span class='hljl-t'> </span><span class='hljl-kp'>in</span><span class='hljl-t'> </span><span class='hljl-n'>J</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>&gt;=</span><span class='hljl-t'> </span><span class='hljl-ni'>0</span><span class='hljl-p'>)</span><span class='hljl-t'>
2-dimensional DenseAxisArray{JuMP.VariableRef,2,...} with index sets:
    Dimension 1, 1:2
    Dimension 2, 1:3
And data, a 2×3 Matrix{JuMP.VariableRef}:
 W[1,1]  W[1,2]  W[1,3]
 W[2,1]  W[2,2]  W[2,3]

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@variable</span><span class='hljl-p'>(</span><span class='hljl-n'>citywaste</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>R</span><span class='hljl-p'>[</span><span class='hljl-n'>k</span><span class='hljl-t'> </span><span class='hljl-kp'>in</span><span class='hljl-t'> </span><span class='hljl-n'>J</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>j</span><span class='hljl-t'> </span><span class='hljl-kp'>in</span><span class='hljl-t'> </span><span class='hljl-n'>J</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>&gt;=</span><span class='hljl-t'> </span><span class='hljl-ni'>0</span><span class='hljl-p'>)</span><span class='hljl-t'>
2-dimensional DenseAxisArray{JuMP.VariableRef,2,...} with index sets:
    Dimension 1, 1:3
    Dimension 2, 1:3
And data, a 3×3 Matrix{JuMP.VariableRef}:
 R[1,1]  R[1,2]  R[1,3]
 R[2,1]  R[2,2]  R[2,3]
 R[3,1]  R[3,2]  R[3,3]

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@variable</span><span class='hljl-p'>(</span><span class='hljl-n'>citywaste</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>Y</span><span class='hljl-p'>[</span><span class='hljl-n'>j</span><span class='hljl-t'> </span><span class='hljl-kp'>in</span><span class='hljl-t'> </span><span class='hljl-n'>J</span><span class='hljl-p'>],</span><span class='hljl-t'> </span><span class='hljl-n'>Bin</span><span class='hljl-p'>)</span><span class='hljl-t'>
1-dimensional DenseAxisArray{JuMP.VariableRef,1,...} with index sets:
    Dimension 1, 1:3
And data, a 3-element Vector{JuMP.VariableRef}:
 Y[1]
 Y[2]
 Y[3]

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># entering data to use in objective</span><span class='hljl-t'>
       </span><span class='hljl-n'>S</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-p'>[</span><span class='hljl-ni'>100</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-ni'>170</span><span class='hljl-p'>]</span><span class='hljl-t'>              </span><span class='hljl-cs'># amount waste generated by each city, (Mg/day)</span><span class='hljl-t'>
2-element Vector{Int64}:
 100
 170

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-n'>C</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-p'>[</span><span class='hljl-ni'>150</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-ni'>350</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-ni'>200</span><span class='hljl-p'>]</span><span class='hljl-t'>         </span><span class='hljl-cs'># capacity of each disposal site, (Mg/day)</span><span class='hljl-t'>
3-element Vector{Int64}:
 150
 350
 200

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-n'>FC</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-p'>[</span><span class='hljl-ni'>2500</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-ni'>1500</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-ni'>2000</span><span class='hljl-p'>]</span><span class='hljl-t'>     </span><span class='hljl-cs'># fixed cost, ($/day)</span><span class='hljl-t'>
3-element Vector{Int64}:
 2500
 1500
 2000

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-n'>TC</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-p'>[</span><span class='hljl-ni'>60</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-ni'>7</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-ni'>50</span><span class='hljl-p'>]</span><span class='hljl-t'>            </span><span class='hljl-cs'># tipping cost, ($/Mg)</span><span class='hljl-t'>
3-element Vector{Int64}:
 60
  7
 50

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-n'>RC</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-ni'>45</span><span class='hljl-t'>                     </span><span class='hljl-cs'># recycling cost at site 2, ($/Mg)</span><span class='hljl-t'>
45

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># waste streams flowing into each site j</span><span class='hljl-t'>
       </span><span class='hljl-n'>In1</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-n'>W</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>1</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>W</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>1</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>R</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>1</span><span class='hljl-p'>]</span><span class='hljl-t'>
W[1,1] + W[2,1] + R[2,1]

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-n'>In2</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-n'>W</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>2</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>W</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>2</span><span class='hljl-p'>]</span><span class='hljl-t'>
W[1,2] + W[2,2]

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-n'>In3</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-n'>W</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>W</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>R</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>R</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-t'>
W[1,3] + W[2,3] + R[1,3] + R[2,3]

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># transport cost</span><span class='hljl-t'>
       </span><span class='hljl-n'>Ztspt</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-nfB'>1.5</span><span class='hljl-oB'>*</span><span class='hljl-p'>(</span><span class='hljl-ni'>15</span><span class='hljl-oB'>*</span><span class='hljl-n'>W</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>1</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-ni'>10</span><span class='hljl-oB'>*</span><span class='hljl-n'>W</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>1</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-ni'>5</span><span class='hljl-oB'>*</span><span class='hljl-n'>W</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>2</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-ni'>15</span><span class='hljl-oB'>*</span><span class='hljl-n'>W</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>2</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-ni'>30</span><span class='hljl-oB'>*</span><span class='hljl-n'>W</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-ni'>25</span><span class='hljl-oB'>*</span><span class='hljl-n'>W</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-ni'>15</span><span class='hljl-oB'>*</span><span class='hljl-n'>R</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>1</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-ni'>32</span><span class='hljl-oB'>*</span><span class='hljl-n'>R</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-ni'>18</span><span class='hljl-oB'>*</span><span class='hljl-n'>R</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>3</span><span class='hljl-p'>])</span><span class='hljl-t'>
22.5 W[1,1] + 15 W[2,1] + 7.5 W[1,2] + 22.5 W[2,2] + 45 W[1,3] + 37.5 W[2,3] + 22.5 R[2,1] + 48 R[2,3] + 27 R[1,3]

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># objective eqn</span><span class='hljl-t'>
       </span><span class='hljl-n'>Zcost</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-n'>TC</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>]</span><span class='hljl-oB'>*</span><span class='hljl-n'>In1</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>TC</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>]</span><span class='hljl-oB'>*</span><span class='hljl-n'>In2</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>TC</span><span class='hljl-p'>[</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-oB'>*</span><span class='hljl-n'>In3</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>RC</span><span class='hljl-oB'>*</span><span class='hljl-n'>In2</span><span class='hljl-oB'>*</span><span class='hljl-n'>fracR</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-nf'>sum</span><span class='hljl-p'>(</span><span class='hljl-n'>FC</span><span class='hljl-oB'>.*</span><span class='hljl-n'>Y</span><span class='hljl-p'>)</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>Ztspt</span><span class='hljl-t'>
82.5 W[1,1] + 75 W[2,1] + 82.5 R[2,1] + 31.487500000000004 W[1,2] + 46.487500000000004 W[2,2] + 95 W[1,3] + 87.5 W[2,3] + 77 R[1,3] + 98 R[2,3] + 2500 Y[1] + 1500 Y[2] + 2000 Y[3]

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@objective</span><span class='hljl-p'>(</span><span class='hljl-n'>citywaste</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>Min</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>Zcost</span><span class='hljl-p'>)</span><span class='hljl-t'>
82.5 W[1,1] + 75 W[2,1] + 82.5 R[2,1] + 31.487500000000004 W[1,2] + 46.487500000000004 W[2,2] + 95 W[1,3] + 87.5 W[2,3] + 77 R[1,3] + 98 R[2,3] + 2500 Y[1] + 1500 Y[2] + 2000 Y[3]

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># constraints</span><span class='hljl-t'>
       </span><span class='hljl-cs'># 1 - city mass balance</span><span class='hljl-t'>
       </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>citywaste</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>city</span><span class='hljl-p'>[</span><span class='hljl-n'>i</span><span class='hljl-t'> </span><span class='hljl-kp'>in</span><span class='hljl-t'> </span><span class='hljl-n'>I</span><span class='hljl-p'>],</span><span class='hljl-t'> </span><span class='hljl-nf'>sum</span><span class='hljl-p'>(</span><span class='hljl-n'>W</span><span class='hljl-p'>[</span><span class='hljl-n'>i</span><span class='hljl-p'>,</span><span class='hljl-oB'>:</span><span class='hljl-p'>])</span><span class='hljl-t'> </span><span class='hljl-oB'>==</span><span class='hljl-t'> </span><span class='hljl-n'>S</span><span class='hljl-p'>[</span><span class='hljl-n'>i</span><span class='hljl-p'>])</span><span class='hljl-t'>
1-dimensional DenseAxisArray{JuMP.ConstraintRef{JuMP.Model, MathOptInterface.ConstraintIndex{MathOptInterface.ScalarAffineFunction{Float64}, MathOptInterface.EqualTo{Float64}}, JuMP.ScalarShape},1,...} with index sets:
    Dimension 1, 1:2
And data, a 2-element Vector{JuMP.ConstraintRef{JuMP.Model, MathOptInterface.ConstraintIndex{MathOptInterface.ScalarAffineFunction{Float64}, MathOptInterface.EqualTo{Float64}}, JuMP.ScalarShape}}:
 city[1] : W[1,1] + W[1,2] + W[1,3] == 100.0
 city[2] : W[2,1] + W[2,2] + W[2,3] == 170.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># 2 - mass balance on residuals</span><span class='hljl-t'>
       </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>citywaste</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>WTEsite</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>R</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>==</span><span class='hljl-t'> </span><span class='hljl-n'>fracA</span><span class='hljl-oB'>*</span><span class='hljl-p'>(</span><span class='hljl-n'>W</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>1</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>W</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>1</span><span class='hljl-p'>])</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>fracAR</span><span class='hljl-oB'>*</span><span class='hljl-p'>(</span><span class='hljl-n'>R</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>1</span><span class='hljl-p'>]))</span><span class='hljl-t'>
WTEsite : -0.16410000000000002 W[1,1] - 0.16410000000000002 W[2,1] - 0.086285 R[2,1] + R[1,3] == 0.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>citywaste</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>MRFsite</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>R</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>1</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>R</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>==</span><span class='hljl-t'> </span><span class='hljl-p'>(</span><span class='hljl-ni'>1</span><span class='hljl-oB'>-</span><span class='hljl-n'>fracR</span><span class='hljl-p'>)</span><span class='hljl-oB'>*</span><span class='hljl-p'>(</span><span class='hljl-n'>W</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>2</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>W</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>2</span><span class='hljl-p'>]))</span><span class='hljl-t'>
MRFsite : -0.6224999999999998 W[1,2] - 0.6224999999999998 W[2,2] + R[2,1] + R[2,3] == 0.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>citywaste</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>LFsite</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-nf'>sum</span><span class='hljl-p'>(</span><span class='hljl-n'>R</span><span class='hljl-p'>[</span><span class='hljl-ni'>3</span><span class='hljl-p'>,</span><span class='hljl-oB'>:</span><span class='hljl-p'>])</span><span class='hljl-t'> </span><span class='hljl-oB'>==</span><span class='hljl-t'> </span><span class='hljl-ni'>0</span><span class='hljl-p'>)</span><span class='hljl-t'>
LFsite : R[3,1] + R[3,2] + R[3,3] == 0.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>citywaste</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>noresiddiag</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-nf'>sum</span><span class='hljl-p'>(</span><span class='hljl-n'>R</span><span class='hljl-p'>[</span><span class='hljl-n'>j</span><span class='hljl-p'>,</span><span class='hljl-n'>j</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-k'>for</span><span class='hljl-t'> </span><span class='hljl-n'>j</span><span class='hljl-t'> </span><span class='hljl-kp'>in</span><span class='hljl-t'> </span><span class='hljl-n'>J</span><span class='hljl-p'>)</span><span class='hljl-t'> </span><span class='hljl-oB'>==</span><span class='hljl-t'> </span><span class='hljl-ni'>0</span><span class='hljl-p'>)</span><span class='hljl-t'>    </span><span class='hljl-cs'># make sure no repeats</span><span class='hljl-t'>
noresiddiag : R[1,1] + R[2,2] + R[3,3] == 0.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>citywaste</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>noresid</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>R</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>2</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>==</span><span class='hljl-t'> </span><span class='hljl-ni'>0</span><span class='hljl-p'>)</span><span class='hljl-t'>        </span><span class='hljl-cs'># don&#39;t send anything from WTE to MRF - just ash</span><span class='hljl-t'>
noresid : R[1,2] == 0.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># 3 - capacity</span><span class='hljl-t'>
       </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>citywaste</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>cap1</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>In1</span><span class='hljl-t'> </span><span class='hljl-oB'>&lt;=</span><span class='hljl-t'> </span><span class='hljl-n'>C</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>])</span><span class='hljl-t'>
cap1 : W[1,1] + W[2,1] + R[2,1] &lt;= 150.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>citywaste</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>cap2</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>In2</span><span class='hljl-t'> </span><span class='hljl-oB'>&lt;=</span><span class='hljl-t'> </span><span class='hljl-n'>C</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>])</span><span class='hljl-t'>
cap2 : W[1,2] + W[2,2] &lt;= 350.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>citywaste</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>cap3</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>In3</span><span class='hljl-t'> </span><span class='hljl-oB'>&lt;=</span><span class='hljl-t'> </span><span class='hljl-n'>C</span><span class='hljl-p'>[</span><span class='hljl-ni'>3</span><span class='hljl-p'>])</span><span class='hljl-t'>
cap3 : W[1,3] + W[2,3] + R[1,3] + R[2,3] &lt;= 200.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'>#4 - make sure Y variables are binary</span><span class='hljl-t'>
       </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>citywaste</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>y1</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-oB'>!</span><span class='hljl-n'>Y</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>=&gt;</span><span class='hljl-t'> </span><span class='hljl-p'>{</span><span class='hljl-n'>In1</span><span class='hljl-t'> </span><span class='hljl-oB'>==</span><span class='hljl-t'> </span><span class='hljl-ni'>0</span><span class='hljl-p'>})</span><span class='hljl-t'>
y1 : !Y[1] =&gt; {W[1,1] + W[2,1] + R[2,1] == 0.0}

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>citywaste</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>y2</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-oB'>!</span><span class='hljl-n'>Y</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>=&gt;</span><span class='hljl-t'> </span><span class='hljl-p'>{</span><span class='hljl-n'>In2</span><span class='hljl-t'> </span><span class='hljl-oB'>==</span><span class='hljl-t'> </span><span class='hljl-ni'>0</span><span class='hljl-p'>})</span><span class='hljl-t'>
y2 : !Y[2] =&gt; {W[1,2] + W[2,2] == 0.0}

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>citywaste</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>y3</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>Y</span><span class='hljl-p'>[</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>==</span><span class='hljl-t'> </span><span class='hljl-ni'>1</span><span class='hljl-p'>)</span><span class='hljl-t'>
y3 : Y[3] == 1.0</span>
</pre>

<h2>Problem 1.6</h2>

<pre class='hljl'>
<span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># solve model</span><span class='hljl-t'>
       </span><span class='hljl-nf'>set_silent</span><span class='hljl-p'>(</span><span class='hljl-n'>citywaste</span><span class='hljl-p'>)</span><span class='hljl-t'>

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nf'>optimize!</span><span class='hljl-p'>(</span><span class='hljl-n'>citywaste</span><span class='hljl-p'>)</span><span class='hljl-t'>

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># get answers - objective value</span><span class='hljl-t'>
       </span><span class='hljl-n'>Zmin</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-nf'>round</span><span class='hljl-p'>(</span><span class='hljl-nf'>objective_value</span><span class='hljl-p'>(</span><span class='hljl-n'>citywaste</span><span class='hljl-p'>),</span><span class='hljl-t'> </span><span class='hljl-n'>digits</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-ni'>2</span><span class='hljl-p'>)</span><span class='hljl-t'>
28886.36

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># decision variables</span><span class='hljl-t'>
       </span><span class='hljl-n'>Wans</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-n'>round</span><span class='hljl-oB'>.</span><span class='hljl-p'>(</span><span class='hljl-nf'>Matrix</span><span class='hljl-p'>(</span><span class='hljl-n'>value</span><span class='hljl-oB'>.</span><span class='hljl-p'>(</span><span class='hljl-n'>W</span><span class='hljl-p'>)),</span><span class='hljl-t'> </span><span class='hljl-n'>digits</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-ni'>2</span><span class='hljl-p'>)</span><span class='hljl-t'>
2×3 Matrix{Float64}:
 83.74  0.0   16.26
  0.0   0.0  170.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-n'>Rans</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-n'>round</span><span class='hljl-oB'>.</span><span class='hljl-p'>(</span><span class='hljl-nf'>Matrix</span><span class='hljl-p'>(</span><span class='hljl-n'>value</span><span class='hljl-oB'>.</span><span class='hljl-p'>(</span><span class='hljl-n'>R</span><span class='hljl-p'>)),</span><span class='hljl-t'> </span><span class='hljl-n'>digits</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-ni'>2</span><span class='hljl-p'>)</span><span class='hljl-t'>
3×3 Matrix{Float64}:
 0.0  0.0  13.74
 0.0  0.0   0.0
 0.0  0.0   0.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-n'>Yans</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-nf'>Vector</span><span class='hljl-p'>(</span><span class='hljl-n'>value</span><span class='hljl-oB'>.</span><span class='hljl-p'>(</span><span class='hljl-n'>Y</span><span class='hljl-p'>))</span><span class='hljl-t'>
3-element Vector{Float64}:
 1.0
 0.0
 1.0</span>
</pre>

<p>From this, we can see that a minimum cost of &#36; <span class="math">$28,886$</span>/day is achieved with the following waste flows:</p>
<p><img src="C:\Users\Caroline\Documents\bee4750\hw4-crh227\wasteflowsq1.PNG" alt="Figure 1. Waste Flows - Question 1" /></p>
<h1>Problem 2</h1>
<h2>Problem 2.1</h2>
<p>The only changes needed for this added carbon tax are to update the tipping cost of WTE from 60/Mg to 75/Mg and  to change the transportation cost from 1.5/Mg-km to 2/Mg-km. There is no need for additional constraints because  there is no environmental standard or limit on emissions; rather, the environmental impact of increased carbon  emissions will be reflected in increased costs. </p>
<h2>Problem 2.2</h2>
<p>Creating a new model with the added carbon tax included:</p>

<pre class='hljl'>
<span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># setting up model definition</span><span class='hljl-t'>
       </span><span class='hljl-k'>using</span><span class='hljl-t'> </span><span class='hljl-n'>JuMP</span><span class='hljl-t'>

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-k'>using</span><span class='hljl-t'> </span><span class='hljl-n'>Cbc</span><span class='hljl-t'>

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-n'>carbontax</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-nf'>Model</span><span class='hljl-p'>(</span><span class='hljl-n'>Cbc</span><span class='hljl-oB'>.</span><span class='hljl-n'>Optimizer</span><span class='hljl-p'>)</span><span class='hljl-t'>
A JuMP Model
Feasibility problem with:
Variables: 0
Model mode: AUTOMATIC
CachingOptimizer state: EMPTY_OPTIMIZER
Solver name: COIN Branch-and-Cut (Cbc)

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-n'>I</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-ni'>1</span><span class='hljl-oB'>:</span><span class='hljl-ni'>2</span><span class='hljl-t'>     </span><span class='hljl-cs'># number of cities</span><span class='hljl-t'>
1:2

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-n'>J</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-ni'>1</span><span class='hljl-oB'>:</span><span class='hljl-ni'>3</span><span class='hljl-t'>     </span><span class='hljl-cs'># number of disposal sites</span><span class='hljl-t'>
1:3

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># defining decision variables</span><span class='hljl-t'>
       </span><span class='hljl-nd'>@variable</span><span class='hljl-p'>(</span><span class='hljl-n'>carbontax</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>Wc</span><span class='hljl-p'>[</span><span class='hljl-n'>i</span><span class='hljl-t'> </span><span class='hljl-kp'>in</span><span class='hljl-t'> </span><span class='hljl-n'>I</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>j</span><span class='hljl-t'> </span><span class='hljl-kp'>in</span><span class='hljl-t'> </span><span class='hljl-n'>J</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>&gt;=</span><span class='hljl-t'> </span><span class='hljl-ni'>0</span><span class='hljl-p'>)</span><span class='hljl-t'>
2-dimensional DenseAxisArray{JuMP.VariableRef,2,...} with index sets:
    Dimension 1, 1:2
    Dimension 2, 1:3
And data, a 2×3 Matrix{JuMP.VariableRef}:
 Wc[1,1]  Wc[1,2]  Wc[1,3]
 Wc[2,1]  Wc[2,2]  Wc[2,3]

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@variable</span><span class='hljl-p'>(</span><span class='hljl-n'>carbontax</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>Rc</span><span class='hljl-p'>[</span><span class='hljl-n'>k</span><span class='hljl-t'> </span><span class='hljl-kp'>in</span><span class='hljl-t'> </span><span class='hljl-n'>J</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>j</span><span class='hljl-t'> </span><span class='hljl-kp'>in</span><span class='hljl-t'> </span><span class='hljl-n'>J</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>&gt;=</span><span class='hljl-t'> </span><span class='hljl-ni'>0</span><span class='hljl-p'>)</span><span class='hljl-t'>
2-dimensional DenseAxisArray{JuMP.VariableRef,2,...} with index sets:
    Dimension 1, 1:3
    Dimension 2, 1:3
And data, a 3×3 Matrix{JuMP.VariableRef}:
 Rc[1,1]  Rc[1,2]  Rc[1,3]
 Rc[2,1]  Rc[2,2]  Rc[2,3]
 Rc[3,1]  Rc[3,2]  Rc[3,3]

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@variable</span><span class='hljl-p'>(</span><span class='hljl-n'>carbontax</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>Yc</span><span class='hljl-p'>[</span><span class='hljl-n'>j</span><span class='hljl-t'> </span><span class='hljl-kp'>in</span><span class='hljl-t'> </span><span class='hljl-n'>J</span><span class='hljl-p'>],</span><span class='hljl-t'> </span><span class='hljl-n'>Bin</span><span class='hljl-p'>)</span><span class='hljl-t'>
1-dimensional DenseAxisArray{JuMP.VariableRef,1,...} with index sets:
    Dimension 1, 1:3
And data, a 3-element Vector{JuMP.VariableRef}:
 Yc[1]
 Yc[2]
 Yc[3]

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># waste streams flowing into each site j</span><span class='hljl-t'>
       </span><span class='hljl-n'>In1c</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-n'>Wc</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>1</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>Wc</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>1</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>Rc</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>1</span><span class='hljl-p'>]</span><span class='hljl-t'>
Wc[1,1] + Wc[2,1] + Rc[2,1]

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-n'>In2c</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-n'>Wc</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>2</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>Wc</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>2</span><span class='hljl-p'>]</span><span class='hljl-t'>
Wc[1,2] + Wc[2,2]

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-n'>In3c</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-n'>Wc</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>Wc</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>Rc</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>Rc</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-t'>
Wc[1,3] + Wc[2,3] + Rc[1,3] + Rc[2,3]

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># update TC for WTE to $75/Mg</span><span class='hljl-t'>
       </span><span class='hljl-n'>TC</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-p'>[</span><span class='hljl-ni'>75</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-ni'>7</span><span class='hljl-p'>;</span><span class='hljl-t'> </span><span class='hljl-ni'>50</span><span class='hljl-p'>]</span><span class='hljl-t'>
3-element Vector{Int64}:
 75
  7
 50

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># update transport cost</span><span class='hljl-t'>
       </span><span class='hljl-n'>Ztsptc</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-ni'>2</span><span class='hljl-oB'>*</span><span class='hljl-p'>(</span><span class='hljl-ni'>15</span><span class='hljl-oB'>*</span><span class='hljl-n'>Wc</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>1</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-ni'>10</span><span class='hljl-oB'>*</span><span class='hljl-n'>Wc</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>1</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-ni'>5</span><span class='hljl-oB'>*</span><span class='hljl-n'>Wc</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>2</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-ni'>15</span><span class='hljl-oB'>*</span><span class='hljl-n'>Wc</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>2</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-ni'>30</span><span class='hljl-oB'>*</span><span class='hljl-n'>Wc</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-ni'>25</span><span class='hljl-oB'>*</span><span class='hljl-n'>Wc</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-ni'>15</span><span class='hljl-oB'>*</span><span class='hljl-n'>Rc</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>1</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-ni'>32</span><span class='hljl-oB'>*</span><span class='hljl-n'>Rc</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-ni'>18</span><span class='hljl-oB'>*</span><span class='hljl-n'>Rc</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>3</span><span class='hljl-p'>])</span><span class='hljl-t'>
30 Wc[1,1] + 20 Wc[2,1] + 10 Wc[1,2] + 30 Wc[2,2] + 60 Wc[1,3] + 50 Wc[2,3] + 30 Rc[2,1] + 64 Rc[2,3] + 36 Rc[1,3]

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># objective eqn - update TC for WTE to $75/Mg</span><span class='hljl-t'>
       </span><span class='hljl-n'>Zcostc</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-n'>TC</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>]</span><span class='hljl-oB'>*</span><span class='hljl-n'>In1c</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>TC</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>]</span><span class='hljl-oB'>*</span><span class='hljl-n'>In2c</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>TC</span><span class='hljl-p'>[</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-oB'>*</span><span class='hljl-n'>In3c</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>RC</span><span class='hljl-oB'>*</span><span class='hljl-n'>In2c</span><span class='hljl-oB'>*</span><span class='hljl-n'>fracR</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-nf'>sum</span><span class='hljl-p'>(</span><span class='hljl-n'>FC</span><span class='hljl-oB'>.*</span><span class='hljl-n'>Yc</span><span class='hljl-p'>)</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>Ztsptc</span><span class='hljl-t'>
105 Wc[1,1] + 95 Wc[2,1] + 105 Rc[2,1] + 33.987500000000004 Wc[1,2] + 53.987500000000004 Wc[2,2] + 110 Wc[1,3] + 100 Wc[2,3] + 86 Rc[1,3] + 114 Rc[2,3] + 2500 Yc[1] + 1500 Yc[2] + 2000 Yc[3]

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@objective</span><span class='hljl-p'>(</span><span class='hljl-n'>carbontax</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>Min</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>Zcostc</span><span class='hljl-p'>)</span><span class='hljl-t'>
105 Wc[1,1] + 95 Wc[2,1] + 105 Rc[2,1] + 33.987500000000004 Wc[1,2] + 53.987500000000004 Wc[2,2] + 110 Wc[1,3] + 100 Wc[2,3] + 86 Rc[1,3] + 114 Rc[2,3] + 2500 Yc[1] + 1500 Yc[2] + 2000 Yc[3]

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># constraints - same as before in question 1</span><span class='hljl-t'>
       </span><span class='hljl-cs'># 1 - city mass balance</span><span class='hljl-t'>
       </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>carbontax</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>city</span><span class='hljl-p'>[</span><span class='hljl-n'>i</span><span class='hljl-t'> </span><span class='hljl-kp'>in</span><span class='hljl-t'> </span><span class='hljl-n'>I</span><span class='hljl-p'>],</span><span class='hljl-t'> </span><span class='hljl-nf'>sum</span><span class='hljl-p'>(</span><span class='hljl-n'>Wc</span><span class='hljl-p'>[</span><span class='hljl-n'>i</span><span class='hljl-p'>,</span><span class='hljl-oB'>:</span><span class='hljl-p'>])</span><span class='hljl-t'> </span><span class='hljl-oB'>==</span><span class='hljl-t'> </span><span class='hljl-n'>S</span><span class='hljl-p'>[</span><span class='hljl-n'>i</span><span class='hljl-p'>])</span><span class='hljl-t'>
1-dimensional DenseAxisArray{JuMP.ConstraintRef{JuMP.Model, MathOptInterface.ConstraintIndex{MathOptInterface.ScalarAffineFunction{Float64}, MathOptInterface.EqualTo{Float64}}, JuMP.ScalarShape},1,...} with index sets:
    Dimension 1, 1:2
And data, a 2-element Vector{JuMP.ConstraintRef{JuMP.Model, MathOptInterface.ConstraintIndex{MathOptInterface.ScalarAffineFunction{Float64}, MathOptInterface.EqualTo{Float64}}, JuMP.ScalarShape}}:
 city[1] : Wc[1,1] + Wc[1,2] + Wc[1,3] == 100.0
 city[2] : Wc[2,1] + Wc[2,2] + Wc[2,3] == 170.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># 2 - mass balance on residuals</span><span class='hljl-t'>
       </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>carbontax</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>WTEsite</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>Rc</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>==</span><span class='hljl-t'> </span><span class='hljl-n'>fracA</span><span class='hljl-oB'>*</span><span class='hljl-p'>(</span><span class='hljl-n'>Wc</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>1</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>Wc</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>1</span><span class='hljl-p'>])</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>fracAR</span><span class='hljl-oB'>*</span><span class='hljl-n'>Rc</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>1</span><span class='hljl-p'>])</span><span class='hljl-t'>
WTEsite : -0.16410000000000002 Wc[1,1] - 0.16410000000000002 Wc[2,1] - 0.086285 Rc[2,1] + Rc[1,3] == 0.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>carbontax</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>MRFsite</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>Rc</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>1</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>Rc</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>==</span><span class='hljl-t'> </span><span class='hljl-p'>(</span><span class='hljl-ni'>1</span><span class='hljl-oB'>-</span><span class='hljl-n'>fracR</span><span class='hljl-p'>)</span><span class='hljl-oB'>*</span><span class='hljl-p'>(</span><span class='hljl-n'>Wc</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>2</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>+</span><span class='hljl-t'> </span><span class='hljl-n'>Wc</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>,</span><span class='hljl-ni'>2</span><span class='hljl-p'>]))</span><span class='hljl-t'>
MRFsite : -0.6224999999999998 Wc[1,2] - 0.6224999999999998 Wc[2,2] + Rc[2,1] + Rc[2,3] == 0.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>carbontax</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>LFsite</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-nf'>sum</span><span class='hljl-p'>(</span><span class='hljl-n'>Rc</span><span class='hljl-p'>[</span><span class='hljl-ni'>3</span><span class='hljl-p'>,</span><span class='hljl-oB'>:</span><span class='hljl-p'>])</span><span class='hljl-t'> </span><span class='hljl-oB'>==</span><span class='hljl-t'> </span><span class='hljl-ni'>0</span><span class='hljl-p'>)</span><span class='hljl-t'>
LFsite : Rc[3,1] + Rc[3,2] + Rc[3,3] == 0.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>carbontax</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>noresiddiag</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-nf'>sum</span><span class='hljl-p'>(</span><span class='hljl-n'>Rc</span><span class='hljl-p'>[</span><span class='hljl-n'>j</span><span class='hljl-p'>,</span><span class='hljl-n'>j</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-k'>for</span><span class='hljl-t'> </span><span class='hljl-n'>j</span><span class='hljl-t'> </span><span class='hljl-kp'>in</span><span class='hljl-t'> </span><span class='hljl-n'>J</span><span class='hljl-p'>)</span><span class='hljl-t'> </span><span class='hljl-oB'>==</span><span class='hljl-t'> </span><span class='hljl-ni'>0</span><span class='hljl-p'>)</span><span class='hljl-t'>    </span><span class='hljl-cs'># make sure no repeats</span><span class='hljl-t'>
noresiddiag : Rc[1,1] + Rc[2,2] + Rc[3,3] == 0.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>carbontax</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>noresid</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>Rc</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>,</span><span class='hljl-ni'>2</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>==</span><span class='hljl-t'> </span><span class='hljl-ni'>0</span><span class='hljl-p'>)</span><span class='hljl-t'>        </span><span class='hljl-cs'># don&#39;t send anything from WTE to MRF - just ash</span><span class='hljl-t'>
noresid : Rc[1,2] == 0.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># 3 - capacity</span><span class='hljl-t'>
       </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>carbontax</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>cap1</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>In1c</span><span class='hljl-t'> </span><span class='hljl-oB'>&lt;=</span><span class='hljl-t'> </span><span class='hljl-n'>C</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>])</span><span class='hljl-t'>
cap1 : Wc[1,1] + Wc[2,1] + Rc[2,1] &lt;= 150.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>carbontax</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>cap2</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>In2c</span><span class='hljl-t'> </span><span class='hljl-oB'>&lt;=</span><span class='hljl-t'> </span><span class='hljl-n'>C</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>])</span><span class='hljl-t'>
cap2 : Wc[1,2] + Wc[2,2] &lt;= 350.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>carbontax</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>cap3</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>In3c</span><span class='hljl-t'> </span><span class='hljl-oB'>&lt;=</span><span class='hljl-t'> </span><span class='hljl-n'>C</span><span class='hljl-p'>[</span><span class='hljl-ni'>3</span><span class='hljl-p'>])</span><span class='hljl-t'>
cap3 : Wc[1,3] + Wc[2,3] + Rc[1,3] + Rc[2,3] &lt;= 200.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'>#4 - make sure Y variables are binary</span><span class='hljl-t'>
       </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>carbontax</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>y1</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-oB'>!</span><span class='hljl-n'>Yc</span><span class='hljl-p'>[</span><span class='hljl-ni'>1</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>=&gt;</span><span class='hljl-t'> </span><span class='hljl-p'>{</span><span class='hljl-n'>In1c</span><span class='hljl-t'> </span><span class='hljl-oB'>==</span><span class='hljl-t'> </span><span class='hljl-ni'>0</span><span class='hljl-p'>})</span><span class='hljl-t'>
y1 : !Yc[1] =&gt; {Wc[1,1] + Wc[2,1] + Rc[2,1] == 0.0}

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>carbontax</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>y2</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-oB'>!</span><span class='hljl-n'>Yc</span><span class='hljl-p'>[</span><span class='hljl-ni'>2</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>=&gt;</span><span class='hljl-t'> </span><span class='hljl-p'>{</span><span class='hljl-n'>In2c</span><span class='hljl-t'> </span><span class='hljl-oB'>==</span><span class='hljl-t'> </span><span class='hljl-ni'>0</span><span class='hljl-p'>})</span><span class='hljl-t'>
y2 : !Yc[2] =&gt; {Wc[1,2] + Wc[2,2] == 0.0}

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nd'>@constraint</span><span class='hljl-p'>(</span><span class='hljl-n'>carbontax</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>y3</span><span class='hljl-p'>,</span><span class='hljl-t'> </span><span class='hljl-n'>Yc</span><span class='hljl-p'>[</span><span class='hljl-ni'>3</span><span class='hljl-p'>]</span><span class='hljl-t'> </span><span class='hljl-oB'>==</span><span class='hljl-t'> </span><span class='hljl-ni'>1</span><span class='hljl-p'>)</span><span class='hljl-t'>
y3 : Yc[3] == 1.0</span>
</pre>

<h2>Problem 2.3</h2>

<pre class='hljl'>
<span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># optimize model</span><span class='hljl-t'>
       </span><span class='hljl-nf'>set_silent</span><span class='hljl-p'>(</span><span class='hljl-n'>carbontax</span><span class='hljl-p'>)</span><span class='hljl-t'>

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-nf'>optimize!</span><span class='hljl-p'>(</span><span class='hljl-n'>carbontax</span><span class='hljl-p'>)</span><span class='hljl-t'>

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># get answers - objective value</span><span class='hljl-t'>
       </span><span class='hljl-n'>Zminc</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-nf'>round</span><span class='hljl-p'>(</span><span class='hljl-nf'>objective_value</span><span class='hljl-p'>(</span><span class='hljl-n'>carbontax</span><span class='hljl-p'>),</span><span class='hljl-t'> </span><span class='hljl-n'>digits</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-ni'>2</span><span class='hljl-p'>)</span><span class='hljl-t'>
33126.95

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-cs'># decision variables</span><span class='hljl-t'>
       </span><span class='hljl-n'>Wc</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-n'>round</span><span class='hljl-oB'>.</span><span class='hljl-p'>(</span><span class='hljl-nf'>Matrix</span><span class='hljl-p'>(</span><span class='hljl-n'>value</span><span class='hljl-oB'>.</span><span class='hljl-p'>(</span><span class='hljl-n'>Wc</span><span class='hljl-p'>)),</span><span class='hljl-t'> </span><span class='hljl-n'>digits</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-ni'>2</span><span class='hljl-p'>)</span><span class='hljl-t'>
2×3 Matrix{Float64}:
 0.0  100.0    0.0
 0.0   85.43  84.57

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-n'>Rc</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-n'>round</span><span class='hljl-oB'>.</span><span class='hljl-p'>(</span><span class='hljl-nf'>Matrix</span><span class='hljl-p'>(</span><span class='hljl-n'>value</span><span class='hljl-oB'>.</span><span class='hljl-p'>(</span><span class='hljl-n'>Rc</span><span class='hljl-p'>)),</span><span class='hljl-t'> </span><span class='hljl-n'>digits</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-ni'>2</span><span class='hljl-p'>)</span><span class='hljl-t'>
3×3 Matrix{Float64}:
 0.0  0.0    0.0
 0.0  0.0  115.43
 0.0  0.0    0.0

</span><span class='hljl-nB'>julia&gt; </span><span class='hljl-n'>Yc</span><span class='hljl-t'> </span><span class='hljl-oB'>=</span><span class='hljl-t'> </span><span class='hljl-nf'>Vector</span><span class='hljl-p'>(</span><span class='hljl-n'>value</span><span class='hljl-oB'>.</span><span class='hljl-p'>(</span><span class='hljl-n'>Yc</span><span class='hljl-p'>))</span><span class='hljl-t'>
3-element Vector{Float64}:
 0.0
 1.0
 1.0</span>
</pre>

<p>From this, we can see that a minimum cost of 33,127/day is achieved with the following waste flows:</p>
<p><img src="C:\Users\Caroline\Documents\bee4750\hw4-crh227\wasteflowsq2.PNG" alt="Figure 2. Waste Flows with Carbon Tax Implemented - Question 2" /></p>
<p>We can see that with this new carbon tax implemented, sending some waste to WTE &#40;option 1&#41; will no longer minimize the overall cost, since  the carbon tax caused the tipping cost of WTE to increase. Instead, now we will operate the MRF facility and send most of the waste from City 1  to this facility, and the rest of City 1 and all of City 2&#39;s waste to the landfill. This causes the overall minimum cost able to be  achieved to increase by ~4,200/day due to the increased transportation costs and new recycling costs.</p>
<h1>References</h1>
<p>I collaborated with Grace Yun to figure out the ash/recycled fractions and constraints.</p>


    <hr class="title">
      </div>
    </div>
  </div>
</BODY>

</HTML>